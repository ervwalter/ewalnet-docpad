require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({2:[function(require,module,exports){
"use strict";var _interopRequire=function(e){return e&&(e["default"]||e)},_core=_interopRequire(require("core-js/library")),React=require("react"),Fluxxor=require("fluxxor"),actions=require("./actions"),gamesStores=require("./gamesStores"),menuStores=require("./menuStores");require("browsernizr/test/touchevents"),require("browsernizr"),require("./lib");var MenuPage=React.createClass({displayName:"MenuPage",mixins:[Fluxxor.FluxMixin(React),Fluxxor.StoreWatchMixin("MenuStore")],componentDidMount:function(){this.getFlux().actions.loadMenuData()},getStateFromFlux:function(){var e=this.getFlux().store("MenuStore");return{litefare:e.litefare,entree:e.entree}},onReseedClick:function(e){this.getFlux().actions.reseedMenu(),e.preventDefault()},render:function(){return React.createElement("div",{className:"container"},React.createElement("div",{id:"actions"},React.createElement("a",{href:"/games/"},React.createElement("span",{className:"icon icon-th-list adjust-down"})),React.createElement("a",{href:"",onClick:this.onReseedClick},React.createElement("span",{className:"icon icon-refresh3"}))),React.createElement("div",{id:"title"},React.createElement("a",{href:"/menu/"},"Board Game Menu")),React.createElement("div",{id:"subtitle"},"— Games for Two Players —"),React.createElement(Category,{key:"litefare",title:"Snacks / Lite Fare",games:this.state.litefare}),React.createElement(Category,{key:"entrees",title:"Entreés",games:this.state.entree}))}}),Category=React.createClass({displayName:"Category",render:function(){var e;return e=0===this.props.games.length?[React.createElement(Placeholder,{key:"1",ellipsis:!0}),React.createElement(Placeholder,{key:"2"}),React.createElement(Placeholder,{key:"3"})]:this.props.games.map(function(e){return React.createElement(MenuItem,{key:e.gameId,game:e})}),React.createElement("div",{className:"category"},React.createElement("div",{className:"category-title"},this.props.title),e)}}),MenuItem=React.createClass({displayName:"MenuItem",render:function(){var e,t=this.props.game;return 0===t.numPlays?e=React.createElement("span",{className:"new"},"New!"):t.rating>8&&(e=React.createElement("span",{className:"icon icon-star favorite"})),React.createElement("div",{className:"item fadein"},React.createElement("div",{className:"name"},React.createElement("a",{href:"http://boardgamegeek.com/boardgame/"+t.gameId},t.name),React.createElement("span",{className:"year"}," (",t.yearPublished,")"),e),React.createElement("div",{className:"mechanics"},t.mechanics.join(", ")),React.createElement("div",{className:"time"},t.playingTime," Minutes"))}}),Placeholder=React.createClass({displayName:"Placeholder",render:function(){return React.createElement("div",{className:"item placeholder"},React.createElement("div",{className:"name"},this.props.ellipsis?React.createElement("span",null,"…"):React.createElement("span",null," ")),React.createElement("div",{className:"mechanics"}," "),React.createElement("div",{className:"time"}," "))}}),flux=new Fluxxor.Flux({},actions);flux.addStores(gamesStores),flux.addStores(menuStores),flux.on("dispatch",function(e,t){console&&console.log&&console.log("[Dispatch]",e,t)}),React.render(React.createElement(MenuPage,{flux:flux}),document.getElementById("menu"));
},{"./actions":236,"./gamesStores":240,"./lib":242,"./menuStores":243,"browsernizr":4,"browsernizr/test/touchevents":18,"core-js/library":20,"fluxxor":21,"react":231}],243:[function(require,module,exports){
"use strict";var _interopRequire=function(e){return e&&(e["default"]||e)},_core=_interopRequire(require("core-js/library")),Fluxxor=require("fluxxor"),constants=require("./constants"),actions=require("./actions"),compare=require("compare-property"),Lazy=require("lazy.js"),moment=require("moment"),seedrandom=require("seedrandom"),helper=require("./helper"),ExclusionsStore=Fluxxor.createStore({initialize:function(){this.exclusions=[],this.loading=!0,this.bindActions(constants.LoadMenuExclusions,this.onLoadMenuExclusions,constants.LoadMenuExclusionsComplete,this.onLoadMenuExclusionsComplete)},onLoadMenuExclusions:function(){this.loading=!0,this.emit("change")},onLoadMenuExclusionsComplete:function(e){this.loading=!1,this.exclusions=e.exclusions,this.emit("change")}}),MenuStore=Fluxxor.createStore({initialize:function(){this.litefare=[],this.entree=[],this._exclusions=[],this._collection=[],this._games=[],this._rnd=seedrandom(moment().format("YYYY-MM-DD")),this.bindActions(constants.LoadMenuExclusionsComplete,this.onLoadMenuExclusionsComplete,constants.LoadCollectionComplete,this.onLoadCollectionComplete,constants.ReseedMenu,this.onReseedMenu)},onLoadCollectionComplete:function(){var e=this;this.waitFor(["CollectionStore"],function(o){e._collection=o.games,e._processGames()})},onLoadMenuExclusionsComplete:function(){var e=this;this.waitFor(["ExclusionsStore"],function(o){e._exclusions=o.exclusions,e._processGames()})},onReseedMenu:function(){this._rnd=seedrandom(),this._processGames()},_processGames:function(){var e=this;if(this._exclusions.length>0&&this._collection.length>0){var o=Lazy(this._exclusions).indexBy(function(e){return e}).toObject(),n=Lazy(this._collection).filter(function(e){return o[e.gameId]||e.minPlayers>2||e.maxPlayers<2?!1:!0});n.each(function(o){var t=1;if(t=1+e._rnd()/10-.05,o.rating&&(t*=1+.2*(o.rating-7)),o.playDates&&o.playDates.length>0){var i=moment().startOf("day").add(1,"day"),s=moment(helper.jsonStringToDate(o.playDates[0]));if(s.isBefore(i)){var r=i.diff(s,"days")-1;o.daysSinceLastPlay=r,r>60&&(r=60),t*=1+.01*(r-10)}}o.numPlays?n.numPlays<5&&(t*=1.1):t*=4,0>t&&(t=0),o.score=t}),this._games=n.toArray();var t=n.groupBy(function(e){var o=e.playingTime;if(e.averageWeight>0){var n=e.averageWeight;n>3.1?o+=45:n>2.8?o+=30:n>2.5?o+=15:1.7>n?o*=.5:2>n&&(o*=2/3)}return e.effectivePlayingTime=Number(o.toFixed(0)),60>=o?"litefare":"entree"}).toObject();console.table&&(console.log("Lite Fare Games:"),console.table(Lazy(t.litefare).sortBy("score",!0).toArray(),["name","score","rating","daysSinceLastPlay","playingTime","effectivePlayingTime","averageWeight"]),console.log("Entree Games:"),console.table(Lazy(t.entree).sortBy("score",!0).toArray(),["name","score","rating","daysSinceLastPlay","playingTime","effectivePlayingTime","averageWeight"])),this.litefare=this._chooseGames(t.litefare,3),this.entree=this._chooseGames(t.entree,3),this.emit("change")}},_chooseGames:function(e,o){var n=Lazy(e).sum(function(e){return e.score});e.forEach(function(e){e.normalizedScore=e.score/n});for(var t=[];t.length<o;){for(var i=this._rnd(),s=0,r=e[s].normalizedScore;i>r&&s<e.length-1;)s++,r+=e[s].normalizedScore;var a=e[s];-1===Lazy(t).indexOf(a)&&t.push(e[s])}return t}});module.exports={ExclusionsStore:new ExclusionsStore,MenuStore:new MenuStore};
},{"./actions":236,"./constants":239,"./helper":241,"compare-property":19,"core-js/library":20,"fluxxor":21,"lazy.js":84,"moment":85,"seedrandom":232}],232:[function(require,module,exports){
!function(n,t,r,e,o,i,u,a,f){function c(n){var t,r=n.length,o=this,i=0,u=o.i=o.j=0,a=o.S=[];for(r||(n=[r++]);e>i;)a[i]=i++;for(i=0;e>i;i++)a[i]=a[u=m&u+n[i%r]+(t=a[i])],a[u]=t;(o.g=function(n){for(var t,r=0,i=o.i,u=o.j,a=o.S;n--;)t=a[i=m&i+1],r=r*e+a[m&(a[i]=a[u=m&u+t])+(a[u]=t)];return o.i=i,o.j=u,r})(e)}function s(n,t){return t.i=n.i,t.j=n.j,t.S=n.S.slice(),t}function l(n,t){var r,e=[],o=typeof n;if(t&&"object"==o)for(r in n)try{e.push(l(n[r],t-1))}catch(i){}return e.length?e:"string"==o?n:n+"\x00"}function p(n,t){for(var r,e=n+"",o=0;o<e.length;)t[m&o]=m&(r^=19*t[m&o])+e.charCodeAt(o++);return h(t)}function g(r){try{return y?h(y.randomBytes(e)):(n.crypto.getRandomValues(r=new Uint8Array(e)),h(r))}catch(o){return[+new Date,n,(r=n.navigator)&&r.plugins,n.screen,h(t)]}}function h(n){return String.fromCharCode.apply(0,n)}var y,d=r.pow(e,o),v=r.pow(2,i),j=2*v,m=e-1,S=r["seed"+f]=function(n,i,u){var a=[];i=1==i?{entropy:!0}:i||{};var y=p(l(i.entropy?[n,h(t)]:null==n?g():n,3),a),m=new c(a);return p(h(m.S),t),(i.pass||u||function(n,t,e,o){return o&&(o.S&&s(o,m),n.state=function(){return s(m,{})}),e?(r[f]=n,t):n})(function(){for(var n=m.g(o),t=d,r=0;v>n;)n=(n+r)*e,t*=e,r=m.g(1);for(;n>=j;)n/=2,t/=2,r>>>=1;return(n+r)/t},y,"global"in i?i.global:this==r,i.state)};if(p(r[f](),t),u&&u.exports){u.exports=S;try{y=require("crypto")}catch(w){}}else a&&a.amd&&a(function(){return S})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random");
},{"crypto":undefined}],242:[function(require,module,exports){
"use strict";var _interopRequire=function(t){return t&&(t["default"]||t)},_core=_interopRequire(require("core-js/library")),__indexOf=[].indexOf||function(t){for(var r=0,i=this.length;i>r;r++)if(r in this&&this[r]===t)return r;return-1};Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),String.prototype.trimStart=function(t){var r,i;if(0===this.length)return this;for(t=null!=t?Array.isArray(t)?t:[t]:[" "],r=0;i=this.charAt(r),__indexOf.call(t,i)>=0&&r<this.length;)r++;return this.substring(r)},String.prototype.trimEnd=function(t){var r,i;for(t=null!=t?Array.isArray(t)?t:[t]:[" "],r=this.length-1;r>=0&&(i=this.charAt(r),__indexOf.call(t,i)>=0);)r--;return this.substring(0,r+1)},String.prototype.trim=function(t){return this.trimStart(t).trimEnd(t)},"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(t){return this.slice(0,t.length)===t}),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(t){return this.slice(-t.length)===t});
},{"core-js/library":20}],18:[function(require,module,exports){
var Modernizr=require("./../lib/Modernizr"),prefixes=require("./../lib/prefixes"),testStyles=require("./../lib/testStyles");Modernizr.addTest("touchevents",function(){var e;if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)e=!0;else{var t=["@media (",prefixes.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");testStyles(t,function(t){e=9===t.offsetTop})}return e});
},{"./../lib/Modernizr":5,"./../lib/prefixes":13,"./../lib/testStyles":16}],16:[function(require,module,exports){
var ModernizrProto=require("./ModernizrProto"),injectElementWithStyles=require("./injectElementWithStyles"),testStyles=ModernizrProto.testStyles=injectElementWithStyles;module.exports=testStyles;
},{"./ModernizrProto":6,"./injectElementWithStyles":11}],11:[function(require,module,exports){
function injectElementWithStyles(e,t,r,o){var d,n,l,i,m="modernizr",a=createElement("div"),c=getBody();if(parseInt(r,10))for(;r--;)l=createElement("div"),l.id=o?o[r]:m+(r+1),a.appendChild(l);return d=["&#173;",'<style id="s',m,'">',e,"</style>"].join(""),a.id=m,(c.fake?c:a).innerHTML+=d,c.appendChild(a),c.fake&&(c.style.background="",c.style.overflow="hidden",i=docElement.style.overflow,docElement.style.overflow="hidden",docElement.appendChild(c)),n=t(a,e),c.fake?(c.parentNode.removeChild(c),docElement.style.overflow=i,docElement.offsetHeight):a.parentNode.removeChild(a),!!n}var ModernizrProto=require("./ModernizrProto"),docElement=require("./docElement"),createElement=require("./createElement"),getBody=require("./getBody");module.exports=injectElementWithStyles;
},{"./ModernizrProto":6,"./createElement":8,"./docElement":9,"./getBody":10}],10:[function(require,module,exports){
function getBody(){var e=document.body;return e||(e=createElement("body"),e.fake=!0),e}var createElement=require("./createElement");module.exports=getBody;
},{"./createElement":8}],8:[function(require,module,exports){
var createElement=function(){return document.createElement.apply(document,arguments)};module.exports=createElement;
},{}],13:[function(require,module,exports){
var ModernizrProto=require("./ModernizrProto"),prefixes=" -webkit- -moz- -o- -ms- ".split(" ");ModernizrProto._prefixes=prefixes,module.exports=prefixes;
},{"./ModernizrProto":6}],4:[function(require,module,exports){
var Modernizr=require("./lib/Modernizr"),ModernizrProto=require("./lib/ModernizrProto"),classes=require("./lib/classes"),testRunner=require("./lib/testRunner"),setClasses=require("./lib/setClasses");testRunner(),setClasses(classes),delete ModernizrProto.addTest,delete ModernizrProto.addAsyncTest;for(var i=0;i<Modernizr._q.length;i++)Modernizr._q[i]();module.exports=Modernizr;
},{"./lib/Modernizr":5,"./lib/ModernizrProto":6,"./lib/classes":7,"./lib/setClasses":14,"./lib/testRunner":15}],15:[function(require,module,exports){
function testRunner(){var s,e,n,t,o,r,i;for(var a in tests){if(s=[],e=tests[a],e.name&&(s.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(n=0;n<e.options.aliases.length;n++)s.push(e.options.aliases[n].toLowerCase());for(t=is(e.fn,"function")?e.fn():e.fn,o=0;o<s.length;o++)r=s[o],i=r.split("."),1===i.length?Modernizr[i[0]]=t:2===i.length&&(Modernizr[i[0]][i[1]]=t),classes.push((t?"":"no-")+i.join("-"))}}var tests=require("./tests"),Modernizr=require("./Modernizr"),classes=require("./classes"),is=require("./is");module.exports=testRunner;
},{"./Modernizr":5,"./classes":7,"./is":12,"./tests":17}],12:[function(require,module,exports){
function is(e,o){return typeof e===o}module.exports=is;
},{}],14:[function(require,module,exports){
function setClasses(e){var s=docElement.className,r=Modernizr._config.classPrefix||"",n=new RegExp("(^|\\s)"+r+"no-js(\\s|$)");s=s.replace(n,"$1"+r+"js$2"),Modernizr._config.enableClasses&&(s+=" "+r+e.join(" "+r),docElement.className=s)}var Modernizr=require("./Modernizr"),docElement=require("./docElement");module.exports=setClasses;
},{"./Modernizr":5,"./docElement":9}],9:[function(require,module,exports){
var docElement=document.documentElement;module.exports=docElement;
},{}],7:[function(require,module,exports){
var classes=[];module.exports=classes;
},{}],5:[function(require,module,exports){
var ModernizrProto=require("./ModernizrProto"),Modernizr=function(){};Modernizr.prototype=ModernizrProto,Modernizr=new Modernizr,module.exports=Modernizr;
},{"./ModernizrProto":6}],6:[function(require,module,exports){
var tests=require("./tests"),ModernizrProto={_version:"v3.0.0pre",_config:{classPrefix:"",enableClasses:!0},_q:[],on:function(s,e){setTimeout(function(){e(this[s])},0)},addTest:function(s,e,n){tests.push({name:s,fn:e,options:n})},addAsyncTest:function(s){tests.push({name:null,fn:s})}};module.exports=ModernizrProto;
},{"./tests":17}],17:[function(require,module,exports){
var tests=[];module.exports=tests;
},{}]},{},[2]);
